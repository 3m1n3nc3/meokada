<div class="content post-editing-form">
	<div class="user-heading">
		<img src="{{ME avatar}}" class="img-circle">
		<span>{{ME username}}</span>
		<svg class="feather feather-arrow" width="18" height="18" viewBox="0 0 48 48" fill="#757575"><path d="M20 34l10-10 -10-10z"></path></svg>
		<span class="pp_area"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-image"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg> {{LANG image}}</span>
		<div id="pp_loader">
			<span style="float:left;margin-right:60px;margin-top:-10px;">0%</span>
			<div class="speeding_wheel"></div>
		</div>
	</div>
	<form class="form" id="upload-post-image" action="{{CONFIG site_url}}/aj/posts/upload-post-images">
		<div class="form-group">
      <textarea class="form-control pp_make_post" name="caption" rows="3" placeholder="{{LANG add_post_caption}}"></textarea>
    </div>
    <?php if (isset($context['challenge'])) { ?>
    <div class="form-group pp_mat_select">
      <label class="pp_mat_label">{{LANG select_challenge}}</label>
      <div>
        <select name="challenge" class="form-control" id="challenge"> 
          <?php foreach($context['challenge'] AS $challenge) { ?>
            <option value="<?=$challenge['id']?>" title="<?=$challenge['info']?>">  <?=$challenge['name']?> (Win Upto: <?=$context['currency_symbol'] . $challenge['winner_prize']?>) </option> 
          <?php } ?>
        </select>
      </div>
      <div class="clear"></div>
    </div>
    <?php } ?>
  	<div class="images-renderer">
  		<div class="select-images" onclick="$('#upload-images').trigger('click');">
  		  <span>
    				<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-image"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>
  			   <h5>{{LANG choose_up210img}}</h5>
  		  </span>
  		</div>
  	</div>
		
        <?php if ($config['face_filter'] == 'on') { ?>
		<div id="camera_container" class="camera_1">
			<canvas width="100%" height="100%" class="camera_2" id='jeeFaceFilterCanvas'></canvas>

			<span class="camera_3" onclick="close_camera_()">
				<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
			</span>
			<span class="camera_4" onclick="capture_image_()">
				<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M4,4H7L9,2H15L17,4H20A2,2 0 0,1 22,6V18A2,2 0 0,1 20,20H4A2,2 0 0,1 2,18V6A2,2 0 0,1 4,4M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9Z"></path></svg>
			</span>
      <span class="camera_7" onclick="stop_record_video_()">
        <svg style="color: red" xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-stop-circle"><circle cx="12" cy="12" r="10"></circle><rect x="9" y="9" width="6" height="6"></rect></svg>
      </span>
      <span class="camera_6" onclick="record_video_()">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-video"><polygon points="23 7 16 12 23 17 23 7"></polygon><rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect></svg>
      </span>
      <span class="camera_timer">
        <label id="minutes">00</label>:<label id="seconds">00</label>
      </span>
			<div class="follow-suggestions-cr camera_5" id="filters_container">
				<div class="cr-wrapper">
					<div class="owl-carousel tl-follow-suggestions" id="follow-suggestions-cr">
						<div class="item pointer" onclick="add_face_filter('fireworks')">
							<img src="{{CONFIG site_url}}/media/img/Fireworks.jpg" width="100px" height="100px">
						</div>
						<div class="item pointer" onclick="add_face_filter('faceDeform')">
							<img src="https://www.w3schools.com/w3css/img_snowtops.jpg" width="100px" height="100px">
						</div>
						<div class="item pointer" onclick="add_face_filter('luffys_hat_1')">
							<img src="{{CONFIG site_url}}/media/img/hat-1.png" width="100px" height="100px">
						</div>
						<div class="item pointer" onclick="add_face_filter('luffys_hat_2')">
							<img src="{{CONFIG site_url}}/media/img/hat-2.jpg" width="100px" height="100px">
						</div>
						<div class="item pointer" onclick="add_face_filter('cloud')">
							<img src="{{CONFIG site_url}}/media/img/cloud.jpg" width="100px" height="100px">
						</div>
						<div class="item pointer" onclick="add_face_filter('butterflies')">
							<img src="{{CONFIG site_url}}/media/img/butterfly.png" width="100px" height="100px">
						</div>
						<div class="item pointer" onclick="add_face_filter('gltf')">
							<img src="{{CONFIG site_url}}/media/img/mask.jpg" width="100px" height="100px">
						</div>
					</div>
				</div>
			</div>
			<div id="camera_button" class="show_filters_" onclick="show_filters()">
				<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M21.47,4.35L20.13,3.79V12.82L22.56,6.96C22.97,5.94 22.5,4.77 21.47,4.35M1.97,8.05L6.93,20C7.24,20.77 7.97,21.24 8.74,21.26C9,21.26 9.27,21.21 9.53,21.1L16.9,18.05C17.65,17.74 18.11,17 18.13,16.26C18.14,16 18.09,15.71 18,15.45L13,3.5C12.71,2.73 11.97,2.26 11.19,2.25C10.93,2.25 10.67,2.31 10.42,2.4L3.06,5.45C2.04,5.87 1.55,7.04 1.97,8.05M18.12,4.25A2,2 0 0,0 16.12,2.25H14.67L18.12,10.59"></path></svg>
			</div>
		</div>
        <div class="filters_1" id="capture_test">
			<img src="" class="filters_2" id="filter_image_">
			<span class="filters_3" onclick="close_image_()">
				<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
			</span>
        </div>
        <div class="filters_1" id="video_test">
      <video id="video_" controls></video>
      <span class="filters_3" onclick="close_video_()">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
      </span>
        </div>
        <p id="from_camera_button" class="open_camera_">
			<a href="javascript:void(0);" onclick="open_camera()"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M4,4H7L9,2H15L17,4H20A2,2 0 0,1 22,6V18A2,2 0 0,1 20,20H4A2,2 0 0,1 2,18V6A2,2 0 0,1 4,4M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9Z"></path></svg> {{LANG from_camera}}</a>
		</p>
        <br>
        <?php } ?>
		
      	<div class="form-group publish">
      		<button type="submit" class="btn btn-info" id="submit_image_btn">{{LANG publish}}</button>
      		<button type="reset" class="btn btn-default" id="close-anim-image-modal">{{LANG close}}</button>
      	</div>
        <input class="hidden" id="upload-images" type="file" name="images[]" multiple accept="image/*">
      	<input class="hidden" type="file" name="filter_image">
		<input type="hidden" name="hash" value="<?php echo($context['csrf_token']) ?>">
	</form>
</div>

<?php if ($config['face_filter'] == 'on') { ?>
<script type="text/javascript">
  function add_face_filter(type) {
    if (typeof(JEEFACEFILTERAPI) != 'undefined') {
      var tracks = JEEFACEFILTERAPI.getVideoInfo().getTracks();
      for (var i = 0; i < tracks.length; i++) {
          tracks[i].stop();
      }
    }
    $('#filters_container').hide();
    
    $('.fireworks').remove();
    $('.faceDeform').remove();
    $('.luffys_hat_1').remove();
    $('.luffys_hat_2').remove();
    $('.cloud').remove();
    $('.butterflies').remove();
    $('.gltf').remove();
    if (type == 'fireworks') {
      $('head').append($('<script>',{
        src: '{{CONFIG site_url}}/sys/import3p/face_filters/js/includes/jeelizFaceFilter.js',
        class:'fireworks'
      }),$('<script>',{
        src: '{{CONFIG site_url}}/sys/import3p/face_filters/js/includes/v90/three.min.js',
        class:'fireworks'
      }),$('<script>',{
        src: '{{CONFIG site_url}}/sys/import3p/face_filters/js/includes/JeelizResizer.js',
        class:'fireworks'
      }),$('<script>',{
        src: '{{CONFIG site_url}}/sys/import3p/face_filters/js/includes/Tween.min.js',
        class:'fireworks'
      }),$('<script>',{
        src: '{{CONFIG site_url}}/sys/import3p/face_filters/js/fireworks/demo.js',
        class:'fireworks'
      }));
      main();
    }
    else if(type == 'faceDeform'){
      $('head').append($('<script>',{
        src: '{{CONFIG site_url}}/sys/import3p/face_filters/js/includes/jeelizFaceFilter.js',
        class:'faceDeform'
      }),$('<script>',{
        src: '{{CONFIG site_url}}/sys/import3p/face_filters/js/includes/v90/three.min.js',
        class:'faceDeform'
      }),$('<script>',{
        src: '{{CONFIG site_url}}/sys/import3p/face_filters/js/includes/JeelizResizer.js',
        class:'faceDeform'
      }),$('<script>',{
        src: '{{CONFIG site_url}}/sys/import3p/face_filters/js/faceDeform/demo.js',
        class:'faceDeform'
      }));
      main();
    }
    else if(type == 'luffys_hat_1'){
      $('head').append($('<script>',{
        src: '{{CONFIG site_url}}/sys/import3p/face_filters/js/includes/jeelizFaceFilter.js',
        class:'luffys_hat_1'
      }),$('<script>',{
        src: '{{CONFIG site_url}}/sys/import3p/face_filters/js/includes/v90/three.min.js',
        class:'luffys_hat_1'
      }),$('<script>',{
        src: '{{CONFIG site_url}}/sys/import3p/face_filters/js/includes/JeelizResizer.js',
        class:'luffys_hat_1'
      }),$('<script>',{
        src: '{{CONFIG site_url}}/sys/import3p/face_filters/js/luffys_hat_1/demo.js',
        class:'luffys_hat_1'
      }));
      main();
    }
    else if(type == 'luffys_hat_2'){
      $('head').append($('<script>',{
        src: '{{CONFIG site_url}}/sys/import3p/face_filters/js/includes/jeelizFaceFilter.js',
        class:'luffys_hat_2'
      }),$('<script>',{
        src: '{{CONFIG site_url}}/sys/import3p/face_filters/js/includes/v90/three.min.js',
        class:'luffys_hat_2'
      }),$('<script>',{
        src: '{{CONFIG site_url}}/sys/import3p/face_filters/js/includes/JeelizResizer.js',
        class:'luffys_hat_2'
      }),$('<script>',{
        src: '{{CONFIG site_url}}/sys/import3p/face_filters/js/luffys_hat_2/demo.js',
        class:'luffys_hat_2'
      }),$('<script>',{
        src: '{{CONFIG site_url}}/sys/import3p/face_filters/js/luffys_hat_2/scripts/addDragEventListener.js',
        class:'luffys_hat_2'
      }));
      main();
    }
    else if(type == 'cloud'){
      $('head').append($('<script>',{
        src: '{{CONFIG site_url}}/sys/import3p/face_filters/js/includes/jeelizFaceFilter.js',
        class:'cloud'
      }),$('<script>',{
        src: '{{CONFIG site_url}}/sys/import3p/face_filters/js/includes/v90/three.min.js',
        class:'cloud'
      }),$('<script>',{
        src: '{{CONFIG site_url}}/sys/import3p/face_filters/js/includes/JeelizResizer.js',
        class:'cloud'
      }),$('<script>',{
        src: '{{CONFIG site_url}}/sys/import3p/face_filters/js/includes/Tween.min.js',
        class:'cloud'
      }),$('<script>',{
        src: '{{CONFIG site_url}}/sys/import3p/face_filters/js/cloud/demo.js',
        class:'cloud'
      }));
      main();
    }
    else if(type == 'butterflies'){
      $('head').append($('<script>',{
        src: '{{CONFIG site_url}}/sys/import3p/face_filters/js/includes/jeelizFaceFilter.js',
        class:'butterflies'
      }),$('<script>',{
        src: '{{CONFIG site_url}}/sys/import3p/face_filters/js/includes/v90/three.min.js',
        class:'butterflies'
      }),$('<script>',{
        src: '{{CONFIG site_url}}/sys/import3p/face_filters/js/includes/JeelizResizer.js',
        class:'butterflies'
      }),$('<script>',{
        src: '{{CONFIG site_url}}/sys/import3p/face_filters/js/includes/Tween.min.js',
        class:'butterflies'
      }),$('<script>',{
        src: '{{CONFIG site_url}}/sys/import3p/face_filters/js/butterflies/demo.js',
        class:'butterflies'
      }));
      main();
    }
    else if(type == 'gltf'){
      $('head').append($('<script>',{
        src: '{{CONFIG site_url}}/sys/import3p/face_filters/js/includes/jeelizFaceFilter.js',
        class:'gltf'
      }),$('<script>',{
        src: '{{CONFIG site_url}}/sys/import3p/face_filters/js/includes/v91/threeModified.js',
        class:'gltf'
      }),$('<script>',{
        src: '{{CONFIG site_url}}/sys/import3p/face_filters/js/includes/v90/GLTFLoader.js',
        class:'gltf'
      }),$('<script>',{
        src: '{{CONFIG site_url}}/sys/import3p/face_filters/js/gltf/demo.js',
        class:'gltf'
      }));
      main();
    }
  }
</script>
<?php } ?>
<?php 
include $context['dirname_theme'].'/home/templates/home/js/script.upload.images.html';
 ?>
 <!-- <script src="{{CONFIG site_url}}/sys/import3p/face_filters/record/js/third_party/webgl_teapot/demo.js"></script> -->
